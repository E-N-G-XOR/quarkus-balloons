{"version":3,"file":"winner.service.js","sourceRoot":"","sources":["winner.service.ts"],"names":[],"mappings":";;;;;;;;;;AAAA,qBAA2B,eAAe,CAAC,CAAA;AAG3C;IAIE;QAFA,cAAS,GAAY,KAAK,CAAC;IAEZ,CAAC;IAEhB,+BAAO,GAAP,UAAQ,WAAoB;QAA5B,iBAuCC;QAtCC,EAAE,CAAC,CAAC,WAAW,IAAI,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;YAClC,IAAI,CAAC,EAAE,CAAC,KAAK,EAAE,CAAC;YAChB,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;YACvB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QACzB,CAAC;QAED,IAAM,QAAQ,GAAG,YAAY,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;QAEnD,EAAE,CAAC,CAAC,CAAC,QAAQ,IAAI,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;YAChC,MAAM,CAAC;QACT,CAAC;QAED,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QAEtB,IAAI,CAAC,EAAE,GAAG,IAAI,SAAS,CAAC,iCAAiC,CAAC,CAAC;QAC3D,IAAI,CAAC,EAAE,CAAC,MAAM,GAAG,UAAA,KAAK;YACpB,OAAO,CAAC,GAAG,CAAC,0BAA0B,CAAC,CAAC;YACxC,KAAI,CAAC,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QACzB,CAAC,CAAA;QAED,IAAI,CAAC,EAAE,CAAC,SAAS,GAAG,UAAA,KAAK;YACvB,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC;gBAChB,MAAM,CAAC;YACT,CAAC;YAED,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;YAEnB,IAAI,CAAC;gBACH,IAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;gBAEpC,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,KAAK,QAAQ,CAAC,CAAC,CAAC;oBAC3B,OAAO,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;gBAClC,CAAC;YACH,CACA;YAAA,KAAK,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;YAEf,CAAC;QACH,CAAC,CAAA;IACH,CAAC;IA9CH;QAAC,iBAAU,EAAE;;qBAAA;IAgDb,oBAAC;AAAD,CAAC,AA/CD,IA+CC;AA/CY,qBAAa,gBA+CzB,CAAA","sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable()\nexport class WinnerService {\n  ws;\n  connected: boolean = false;\n\n  constructor() {}\n\n  connect(newPlayerId?: string) {\n    if (newPlayerId && this.connected) {\n      this.ws.close();\n      console.log('in here');\n      this.connected = false;\n    }\n\n    const playerId = localStorage.getItem('player-id');\n\n    if (!playerId || this.connected) {\n      return;\n    }\n\n    this.connected = true;\n\n    this.ws = new WebSocket('ws://localhost:8081/game/winner');\n    this.ws.onopen = event => {\n      console.log('connected to game winner');\n      this.ws.send(playerId);\n    }\n\n    this.ws.onmessage = event => {\n      if (!event.data) {\n        return;\n      }\n\n      console.log(event);\n\n      try {\n        const data = JSON.parse(event.data);\n\n        if (data.type === 'winner') {\n          console.log('You are a winner');\n        }\n      }\n      catch (error) {\n\n      }\n    }\n  }\n\n}\n"]}